<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns:MSHelp="http://www.microsoft.com/MSHelp/" lang="en-us" xml:lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Linking with ScaLAPACK and Cluster FFTs">
<meta name="DC.subject" content="cluster software, linking with, commands, Cluster FFT, linking with, ScaLAPACK, linking with">
<meta name="keywords" content="cluster software, linking with, commands, Cluster FFT, linking with, ScaLAPACK, linking with">
<meta name="DC.Relation" scheme="URI" content="GUID-961566D0-E177-467A-96F6-E0D6541430A0.htm">
<meta name="DC.Relation" scheme="URI" content="GUID-DF5E72C6-E420-4B31-B6B1-3D4901E62F9C.htm">
<meta name="DC.Relation" scheme="URI" content="GUID-96D2696A-BBFD-4869-B51B-926E31EA9300.htm">
<meta name="DC.Relation" scheme="URI" content="http://www.intel.com/software/products/softwaredocs_feedback">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="GUID-75CABA2D-272A-4E55-BE10-30D8EF592752">
<meta name="DC.Language" content="en-US">
<link rel="stylesheet" type="text/css" href="intel_css_styles.css">
<title>Linking with ScaLAPACK and Cluster FFTs</title>
<xml>
<MSHelp:Attr Name="DocSet" Value="Intel"></MSHelp:Attr>
<MSHelp:Attr Name="Locale" Value="kbEnglish"></MSHelp:Attr>
<MSHelp:Attr Name="TopicType" Value="kbReference"></MSHelp:Attr>
</xml>
</head>
<body id="GUID-75CABA2D-272A-4E55-BE10-30D8EF592752">
 <!-- ==============(Start:NavScript)================= -->
 <script src="NavScript.js" language="JavaScript1.2" type="text/javascript"></script>
 <script language="JavaScript1.2" type="text/javascript">WriteNavLink(0);</script>
 <!-- ==============(End:NavScript)================= -->


 
  <h1 class="topictitle1">Linking with ScaLAPACK and Cluster FFTs</h1>
 
   
  <div id="GUID-0943C4B3-CCEE-46F8-8769-30EE82B0C50B"> 
    <p id="GUID-57322131-D843-42A3-A21C-2A6B717C6FA4">The Intel MKL ScaLAPACK and Cluster FFTs support MPI implementations identified in the 
      <em id="GUID-04177AE1-0DBF-4456-BCEE-D070A6AD8099">Intel MKL Release Notes</em>. 
    </p>
 
    <p id="GUID-857AD1D6-3279-43AC-B22C-B5380D35491E">To link a program that calls ScaLAPACK or Cluster FFTs, you need to know how to link a message-passing interface (MPI) application first. 
    </p>
 
    <p id="GUID-B122F5C8-04E7-403E-9B96-F8E8B081D944"> Use mpi scripts to do this. For example, mpicc or mpif77 are C or FORTRAN&nbsp;77 scripts, respectively, that use the correct MPI header files. The location of these scripts and the MPI library depends on your MPI implementation. For example, for the default installation of MPICH, 
      <span class="filepath" id="GUID-39A1DBFC-BDF4-4012-8182-44A1CB93B4E7">/opt/mpich/bin/mpicc</span> and 
      <span class="filepath" id="GUID-E469B101-7CA1-4304-B1BE-5D9664014D49">/opt/mpich/bin/mpif77</span> are the compiler scripts and 
      <span class="filepath" id="GUID-2106C23B-F913-4D14-BDD1-F7ADF8E6E984">/opt/mpich/lib/libmpich.a</span> is the MPI library. 
    </p>
 
    <p id="GUID-2D0ADBF8-DF14-4F25-B62C-507BC25EB3FC">Check the documentation that comes with your MPI implementation for implementation-specific details of linking. 
    </p>
 
    <p id="GUID-16D61C70-9EA9-4540-BF8C-787BAA0CC4DD"> 
      <span id="GUID-418232B5-9CCD-4D3E-9C2E-8F73B20F6BF3">To link with Intel MKL ScaLAPACK and/or Cluster FFTs, use the following</span> 
      <span id="GUID-CB364D2A-B90C-4411-A2C3-F60E752E7D2C">general form</span> 
      <span id="GUID-FCBEC558-96EA-40E0-B333-5F48F2E619FC">:</span> 
    </p>
 
    <p id="GUID-112BECCB-94F5-4696-A74B-86585F9D2932"> 
      <samp class="codeph" id="GUID-56F3AC6D-0E74-4F57-B5A7-DC65DDB44797"> 
        <var>&lt;MPI linker script&gt;</var> 
        <span id="GUID-CAC9E1C3-2FD9-450B-ADE0-5FD34228FCD7"> 
          <var>&lt;files to link&gt;</var>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> 
        <span id="GUID-0AE7BDCA-BB67-40FC-BF82-F2EA92091062">\ 
          <br> -L</span> 
        <var>&lt;MKL path&gt;</var> 
        <span id="GUID-F6025C13-CF0D-4966-A074-2B0DFCC20367">[-Wl,--start-group]</span> 
        <var>&lt;MKL cluster library&gt;</var> 
        <span id="GUID-C10351C0-5AA2-4C54-95FE-38C9354026AD">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\</span> 
        <br> 
        <var>&lt;BLACS&gt; &lt;MKL core libraries&gt;</var> 
        <span id="GUID-5EE04C39-E6D9-4008-B450-2155D1786942">[-Wl,--end-group]</span> 
      </samp> 
    </p>
 
    <p id="GUID-DACADD84-E645-42A4-B4B8-55B00AA925DD"> 
      <span id="GUID-F221BC5D-2F7D-4562-9EF7-A43FB3A5F7B5">where the placeholders stand for paths and libraries as explained in the following table:</span> 
    </p>
 
    
<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-CC879F24-E1E1-4B0A-85C7-037C80AA593A" width="100%" frame="hsides" border="1" rules="all"> 
         
         
        <tbody> 
          <tr> 
            <td class="cellrowborder" valign="top" width="20%"> 
              <p id="GUID-9D58D7A9-2DBF-4A31-966E-89D989051D97"> 
                <samp class="codeph" id="GUID-20C75E8F-563E-4552-BBD2-8250134246C0"> 
                  <var>&lt;MKL cluster library&gt;</var> 
                </samp> 
              </p>
 
            </td>
 
            <td class="row-nocellborder" valign="top" width="80%"> 
              <p id="GUID-C99F5B42-06FD-40BF-98EB-292E5F2BFE64">One of ScaLAPACK or Cluster FFT libraries for the appropriate architecture and programming interface (LP64 or ILP64). Available libraries are listed in 
                <a href="GUID-E1D65283-7158-47FD-8EF8-F457261BC3AC.htm">Directory Structure in Detail</a>. For example, for the IA-32 architecture, it is either 
                <samp class="codeph" id="GUID-95ABD114-BAFA-4B78-B147-68EEB2AACBD6">-lmkl_scalapack_core</samp> or 
                <samp class="codeph" id="GUID-2D862F97-B228-405D-8958-A23ECFA4ED0C">-lmkl_cdft_core</samp>. 
              </p>
 
            </td>
 
          </tr>
 
          <tr> 
            <td class="cellrowborder" valign="top" width="20%"> 
              <p id="GUID-187C7A2D-6199-4454-AC81-719C90BDEC76"> 
                <samp class="codeph" id="GUID-06525E87-F157-4190-BD9E-DED98034B17E"> 
                  <var>&lt;BLACS&gt;</var> 
                </samp> 
              </p>
 
            </td>
 
            <td class="row-nocellborder" valign="top" width="80%"> 
              <p id="GUID-447E19DE-E2F3-4291-9468-161F6C485914">The BLACS library corresponding to your architecture, programming interface (LP64 or ILP64), and MPI used. Available BLACS libraries are listed in 
                <a href="GUID-E1D65283-7158-47FD-8EF8-F457261BC3AC.htm">Directory Structure in Detail</a>. For example, for the IA-32 architecture, choose one of 
                <samp class="codeph" id="GUID-C6A73AE8-6031-442E-9D3F-DE6D1BC04A60">-lmkl_blacs, -lmkl_blacs_intelmpi</samp>, or 
                <samp class="codeph" id="GUID-90BF0887-6428-443E-9B85-3E4027111AF0">-lmkl_blacs_openmpi</samp>, depending on the MPI; specifically, for Intel MPI, choose 
                <samp class="codeph" id="GUID-F2AC5CAB-95DF-4985-9D49-EE784CEDCE03">-lmkl_blacs_intelmpi</samp>. 
              </p>
 
            </td>
 
          </tr>
 
          <tr> 
            <td class="cellrowborder" valign="top" width="20%"> 
              <p id="GUID-7F0659D2-0561-456B-89A3-5CAB2BD794D1"> 
                <samp class="codeph" id="GUID-B6A589F3-6825-4049-AEB4-EF5158722B1A"> 
                  <var>&lt;MKL core libraries&gt;</var> 
                </samp> 
              </p>
 
            </td>
 
            <td class="row-nocellborder" valign="top" width="80%"> 
              <p id="GUID-C976699A-C1E4-4B24-A0FE-C16E11340EE2"> 
                <samp class="codeph" id="GUID-77A7577D-C8A0-4A95-9976-08E6C5D8CA31"> 
                  <var>&lt;MKL LAPACK &amp; MKL kernel libraries&gt;</var> 
                </samp> for ScaLAPACK, and 
                <samp class="codeph" id="GUID-BCB299DF-2D00-4535-9B74-5C7DB2E57452"><var>&lt;MKL kernel libraries&gt;</var></samp> for Cluster FFTs. 
              </p>
 
            </td>
 
          </tr>
 
          <tr> 
            <td class="cellrowborder" valign="top" width="20%"> 
              <p id="GUID-2F694D3B-D39C-42FE-8E3C-B191C6979DC2"> 
                <samp class="codeph" id="GUID-D0DC6F89-B8C1-42CB-97D6-85DDB0080982"> 
                  <var>&lt;MKL kernel libraries&gt;</var> 
                </samp> 
              </p>
 
            </td>
 
            <td class="row-nocellborder" valign="top" width="80%"> 
              <p id="GUID-2F5460AC-5622-4C27-8D02-95195179D589">Processor optimized kernels, threading library, and system library for threading support, linked as described in 
                <a href="GUID-F6E3AD73-ED3F-499E-A125-9570533F7B53.htm"><span id="GUID-7E588E09-5E7D-4688-9F2C-31CA8A761239">Listing Libraries on a Link Line</span></a>. 
              </p>
 
            </td>
 
          </tr>
 
          <tr> 
            <td class="cellrowborder" valign="top" width="20%"> 
              <p id="GUID-A08BD8C0-D708-4E1A-86C6-E69C726A7A02"> 
                <samp class="codeph" id="GUID-AB1E6F52-F3D4-4B0D-98EE-981D21CDA505"> 
                  <var>&lt;MKL LAPACK &amp; kernel libraries&gt;</var> 
                </samp> 
              </p>
 
            </td>
 
            <td class="row-nocellborder" valign="top" width="80%"> 
              <p id="GUID-9E288F65-39C8-4C0F-B6FF-9D21BD61E3B0">The LAPACK library and 
                <samp class="codeph" id="GUID-829F13BF-2211-4E22-819A-DBABBE51E9AE"><var>&lt;MKL kernel libraries&gt;</var></samp>. 
              </p>
 
            </td>
 
          </tr>
 

          <tr> 
            <td class="cellrowborder" valign="top" width="20%"> 
              <p id="GUID-6CCCB6F5-C6E0-4654-AA9C-79BCCADF1C32"> 
                <samp class="codeph" id="GUID-2A5A2DBF-B379-4E94-B74E-014AE6D61AAA"> 
                  <var>&lt;MPI linker script&gt;</var> 
                </samp> 
              </p>
 
            </td>
 
            <td class="row-nocellborder" valign="top" width="80%"> 
              <p id="GUID-92A3F36C-5262-4CBD-B306-D5AC9FB879F5">A linker script that corresponds to the MPI version. 
              </p>
 
            </td>
 
          </tr>
 
        </tbody>
 
      </table>
</div>
 
    <p id="GUID-A920530B-2C9F-42C9-874C-34E3CE627C44"> 
      <span id="GUID-7A56446F-E3DA-4BBE-B89B-3E54F08158FD">For example, if you are using Intel MPI, want to statically link with ScaLAPACK using the LP64 interface, and have only one MPI process per core (and thus do not use threading), specify the following linker options:</span> 
    </p>
 
    <p id="GUID-9861C7BE-7124-4DD9-AB32-EAFD0AEB7292"> 
      <span id="GUID-F83FC6CF-E2D2-4D19-8E58-35F833B4D192"> 
        <samp class="codeph" id="GUID-C0BFA566-34E2-4901-839B-E9F192CE5D71">-L$MKLPATH -I$MKLINCLUDE -Wl,--start-group $MKLPATH/libmkl_scalapack_lp64.a $MKLPATH/libmkl_blacs_intelmpi_lp64.a $MKLPATH/libmkl_intel_lp64.a $MKLPATH/libmkl_sequential.a $MKLPATH/libmkl_core.a -static_mpi -Wl,--end-group -lpthread -lm</samp> 
      </span> 
    </p>
 
    <div class="section" id="GUID-7495E1C2-B93D-4853-AB14-6C8770D09098"> 
      <div class="Note"><h3 class="NoteTipHead">
					Note</h3> 
        <p>Grouping symbols 
          <samp class="codeph" id="GUID-FCBAF1AD-8335-4747-BBDC-8649CD514FA8">-Wl,--start-group</samp> and 
          <samp class="codeph" id="GUID-90B52697-02A4-44C8-935D-78DFF64DB5AA">-Wl,--end-group</samp> are required for static linking. 
        </p>
 
      </div> 
      </div>
 
    <div class="section" id="GUID-DBF5B710-A7AD-402A-B38B-DC5E0D69BF39"> 
      <div class="Note"><h3 class="NoteTipHead">
					Tip</h3> 
        <p>Use the 
          <a href="GUID-E31BB31D-8F02-4B79-A8D2-0ED5D5C8DE93.htm"><span id="GUID-50B155BA-00A4-473E-9756-DC6A56F19559">Link-line Advisor</span> 
          </a> to quickly choose the appropriate set of 
          <samp class="codeph" id="GUID-86D52CAE-9ACB-4368-9886-B78D37DE042B"><var>&lt;MKL cluster Library&gt;</var>, 
            <var>&lt;BLACS&gt;</var></samp>, and 
          <samp class="codeph" id="GUID-C24E8E19-56D5-4AF4-BEF9-804FDDD9BA66"><var>&lt;MKL core libraries&gt;</var>. 
          </samp> 
        </p>
 
      </div> 
      </div>
 
    <p id="P_CF_128713387936914"><a name="P_CF_128713387936914"><!-- --></a> 
	 
<div class="tablenoborder"><a name="d20e18"><!-- --></a><table cellpadding="4" summary="" id="d20e18" frame="border" border="1" cellspacing="0" rules="all"> 
		   
		  <thead align="left"> 
			 <tr> 
				<th class="cellrowborder" align="left" valign="top" width="100%" id="d29931e376"> 
				  <p id="d20e30"><a name="d20e30"><!-- --></a>Optimization Notice 
				  </p>
 
				</th>
 
			 </tr>
</thead>
 
		  <tbody> 
			 <tr> 
				<td class="bgcolor(#ccecff)" bgcolor="#ccecff" valign="top" width="100%" headers="d29931e376 "> 
				  <p>Intel's compilers may or may not optimize to the same degree for non-Intel microprocessors for optimizations that are not unique to Intel microprocessors. These optimizations include SSE2, SSE3, and SSSE3 instruction sets and other optimizations. Intel does not guarantee the availability, functionality, or effectiveness of any optimization on microprocessors not manufactured by Intel. Microprocessor-dependent optimizations in this product are intended for use with Intel microprocessors. Certain optimizations not specific to Intel microarchitecture are reserved for Intel microprocessors. Please refer to the applicable product User and Reference Guides for more information regarding the specific instruction sets covered by this notice. 
				  </p>

				  <p> Notice revision #20110804 
				  </p>
				  

				  </td>
 
			 </tr>
 
		  </tbody>
 
		</table>
</div>
 
	 </p>
 
  </div>
 
  
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong>&nbsp;<a href="GUID-961566D0-E177-467A-96F6-E0D6541430A0.htm">Working with the Intel&reg; Math Kernel Library Cluster Software</a></div>
</div>
<div class="See Also"><h2>See Also</h2>
<div class="linklist">
<div><a href="GUID-DF5E72C6-E420-4B31-B6B1-3D4901E62F9C.htm">Linking Your Application with the Intel&reg; Math Kernel Library 
        </a>  
        </div>
<div><a href="GUID-96D2696A-BBFD-4869-B51B-926E31EA9300.htm">Examples for Linking with ScaLAPACK and Cluster FFT 
        </a>  
        </div></div><br clear="all">
<div class="docfeedback">
<div><a href="http://www.intel.com/software/products/softwaredocs_feedback" target="_blank">Submit feedback on this help topic 
		  </a></div></div></div> 

</body>
</html>
